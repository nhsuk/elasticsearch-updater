{
  "settings":{
    "analysis":{
      "analyzer":{
        "surgery_name_analyzer":{
          "type":"custom",
          "tokenizer":"name_tokenizer",
          "filter":[ "lowercase", "surgery_name_stop" ]
        },
        "fuzzy_surgery_name_analyzer":{
          "type":"custom",
          "tokenizer":"name_tokenizer",
          "filter":[ "lowercase", "surgery_name_stop", "trigrams_filter" ]
        }
      },
      "tokenizer": {
        "name_tokenizer": {
          "type": "pattern",
          "pattern": "[^a-zA-Z']+"
        }
      },
      "filter":{
        "surgery_name_stop":{
          "type":"stop",
          "stopwords": [ "surgery", "health", "centre", "medical" ]
        },
        "trigrams_filter": {
          "type":     "ngram",
          "min_gram": 3,
          "max_gram": 3
        }
      }
    }
  },
  "mappings": {
    "gps": {
      "properties": {
        "odsCode": {
          "type":  "keyword"
        },
        "choicesId": {
          "type":  "integer"
        },
        "openingTimes": {
          "enabled": false
        },
        "facilities": {
          "enabled": false
        },
        "services": {
          "enabled": false
        },
        "onlineServices": {
          "enabled": false
        },
        "contact": {
          "enabled": false
        },
        "acceptingNewPatients": {
          "type": "boolean"
        },
        "address": {
          "enabled": false
        },
        "displayName": {
          "enabled": false
        },
        "location" : {
          "properties" : {
            "coordinates" : {
              "type" : "geo_point"
            }
          }
        },
        "name": {
          "type": "text",
          "fields": {
             "precise": {
               "type": "text",
               "analyzer": "surgery_name_analyzer"
             },
             "trigram": {
               "type": "text",
               "analyzer": "fuzzy_surgery_name_analyzer"
             }
          }
        },
        "alternativeName": {
          "type": "text",
          "fields": {
             "precise": {
               "type": "text",
               "analyzer": "surgery_name_analyzer"
             },
             "trigram": {
               "type": "text",
               "analyzer": "fuzzy_surgery_name_analyzer"
             }
          }
        }
      }
    }
  }
}
